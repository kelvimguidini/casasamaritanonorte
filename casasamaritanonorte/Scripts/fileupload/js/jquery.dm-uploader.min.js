/****** Upload múltiplo ******/
$(document).ready(function () {
    if (window.File && window.FileList && window.FileReader) {
        $("#files").on("change", function (e) {
            var names = [];
            for (var j = 0; j < $(this).get(0).files.length; ++j) {
                //alert($(this).get(0).files[j].name);
            }
            var nome_arquivo = "Imagem";
            var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
            var filename = $('#files').val().split('.').pop().toLowerCase();
            if ($.inArray(filename, fileExtension) == -1) {
                alert("Formatos permitidos: " + fileExtension.join(', '));
            } else {
                var files = e.target.files,
                    filesLength = files.length;
                for (var i = 0; i < filesLength; i++) {
                    var f = files[i]
                    var fileReader = new FileReader();
                    fileReader.onload = (function (e) {
                        var file = e.target;
                        $("<span class=\"pip\">" +
                            "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + nome_arquivo + "\"/>" +
                            "<br/><span class=\"remove\">Remover</span>" +
                            "</span>").insertAfter("#files");
                        $(".remove").click(function () {
                            $(this).parent(".pip").remove();
                        });
                    });
                    fileReader.readAsDataURL(f);
                }
            }
        });
    } else {
        alert("Seu navegador não é compatível com File API")
    }
});
/****** Upload múltiplo ******/